<div
	class="ml-4 flex h-fit min-h-64 w-64 min-w-64 select-none flex-col rounded-xl bg-slate-900 bg-opacity-95 p-2 text-gray-300  shadow-md shadow-purple-600 animate-in duration-600 zoom-in-[0.8]"
>
  <div class="flex items-center p-2">
    <!-- <span class="border-b-2 border-blue-600">{{bloco.titulo}}</span> -->
    <input
        (change)="updateTitulo($event)"
        spellcheck="false"
        class="border-b-2 border-blue-600 w-28 bg-transparent outline-none"
        [value]="bloco.titulo"
    />
    <span  mat-button [matMenuTriggerFor]="menu" class="ml-auto hover:text-gray-300 cursor-pointer transition-all material-symbols-outlined text-white "> more_horiz </span>
    <!-- Dropdown menu -->
    <mat-menu #menu="matMenu" class="customize">
        <button (click)="addAnotacao()" mat-menu-item>
            <div class="flex items-center">
              <span class="material-symbols-outlined mr-1">
                note_add
              </span>Adicionar anotação
            </div>
        </button>
        <button (click)="removerAnotacao()" mat-menu-item>
            <div class="flex items-center">
              <span class="material-symbols-outlined mr-1">
                delete
              </span>Excluir bloco
            </div>
        </button>

    </mat-menu>
  </div>

  @if (bloco.expand) {
      
  	@for (anotacao of bloco.expand["anotacoes_via_bloco"] ; track anotacao){

        <!-- <div class="mb-[-8px] mt-[-9px] h-1 w-full bg-yellow-300">

        </div> -->

  		<div
  			(click)="openAnotacao(anotacao)"
            class="mt-2 flex w-full  items-center rounded-full   border-b-2 border-blue-500 px-2 py-1 h-8 transition-all duration-75 bg-slate-700 hover:bg-slate-600 cursor-pointer hover:border-b-0 hover:translate-y-[2px]"

            >

            <div class="flex w-[160px] items-center">
              <span class="material-symbols-outlined">
              sticky_note_2
              </span>
              @if (anotacao.titulo.length > 16) {
                <div class="ml-2 truncate text-sm" matTooltip="{{anotacao.titulo}}">{{ anotacao.titulo }}</div>
              } @else {
                <div class="ml-2 truncate text-sm">{{ anotacao.titulo }}</div>
              }
            </div>
          </div>
  	}
  }
</div>